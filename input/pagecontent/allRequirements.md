| D5.1 Req ID | D5.1 Normative Requirement | EHDS Basis | Actor | IG Section | Technical Spec |
|-------------|----------------------------|------------|-------|------------|----------------|
| `api-provider-general` | The EHR system acting as a provider SHALL provide access to its priority category data by offering an API that complies to the EHDS API specification. | Annex II §2.1 | Provider | [Document Access Provider](actors.html), [Resource Access Provider](actors.html) | This IG |
| `api-consumer-general` | The EHR system Interoperability Software Component acting as a consumer SHALL consume external priority category data via an API conforming to the EHDS API specification. | Annex II §2.2 | Consumer | [Document Consumer](actors.html), [Resource Consumer](actors.html) | This IG |
| `api-provider-authDiscovery` | The EHR system Interoperability Software Component SHALL enable discovery of its authorization server information to enable a consumer to retrieve authorization. It MAY be handled via machine-discoverable metadata or coordinated out of band. | Annex II §1.4, Art. 36(3)(e) | Provider | [Authorization - Discovery](authorization.html#authorization-server-discovery) | SMART .well-known/smart-configuration |
| `api-provider-authProvideToken` | The EHR system Interoperability Software Component SHALL support issuing authorization tokens to consumer EHR systems using the consumer's registered identity credentials and scopes of access. | Annex II §1.4, Art. 36(3)(e) | Provider (with internal authz server) | [Get Access Token (ITI-71)](authorization.html#get-access-token) | SMART Backend token endpoint |
| `api-consumer-authObtainToken` | The EHR system Interoperability Software Component SHALL obtain an authorization token from the provider's designated authorization server. | Annex II §1.4, Art. 36(3)(e) | Consumer | [Get Access Token (ITI-71)](authorization.html#get-access-token) | SMART Backend client credentials grant |
| `api-provider-authRequireToken` | The EHR system Interoperability Software Component SHALL require a valid authorization token from the Consumer EHR on Interoperability Component exchange. | Annex II §1.4, Art. 36(3)(e) | Provider | [Incorporate Access Token (ITI-72)](authorization.html#incorporate-access-token) | Bearer token validation, IUA |
| `api-consumer-authPresentToken` | The EHR system Interoperability Software Component SHALL present a valid token to the Provider EHR on Interoperability Component Exchange. | Annex II §1.4, Art. 36(3)(e) | Consumer | [Incorporate Access Token (ITI-72)](authorization.html#incorporate-access-token) | Bearer token in Authorization header |
| `api-provider-patient` | The EHR system Interoperability Software Component SHALL offer a patient lookup API sufficient for a consumer to unambiguously identify the patient electronic health record in the provider system given patient identification data (demographics or other forms of patient identity) as search parameters. | Annex II §2.1 | Provider | [Patient Demographics Supplier](patient-match.html) | PDQm ITI-78 |
| `api-consumer-patient` | The EHR system Interoperability Software Component SHALL support an external patient lookup query API to unambiguously identify the patient electronic health record in an external system (such as a provider EHR system), using the consumer system's available patient identification data (demographics or other forms of patient identity). | Annex II §2.2 | Consumer | [Patient Demographics Consumer](patient-match.html) | PDQm Consumer |
| `api-provider-doc` | The EHR system Interoperability Software Component SHALL offer an API that enables an external system (such as a consumer) to access and retrieve its priority category data modelled as FHIR Documents. | Annex II §2.1 | Provider | [Document Responder](document-exchange.html) | MHD ITI-67, ITI-68 |
| `api-consumer-doc` | The EHR system Interoperability Software Component SHALL support an external document query API that allows it to search and access priority category data modelled as FHIR Documents within an external system (such as a provider). | Annex II §2.2 | Consumer | [Document Consumer](document-exchange.html) | MHD Document Consumer |
| `api-provider-resource` | The EHR system Interoperability Software Component SHALL offer search and read access to its data via individual FHIR Resource API(s), for priority data for which EHDS technical specifications are released which define this data as individually retrievable FHIR resources instead of or in addition to FHIR bundles. | Annex II §2.1 | Provider | [Clinical Data Source](resource-access.html) | QEDm PCC-44 |
| `api-consumer-resource` | The EHR system Interoperability Software Component SHALL support an external resource query API that allows it to search and access priority category data within an external system (such as a provider), for which EHDS technical specifications are released which define this data as individually retrievable FHIR resources instead of or in addition to FHIR Document bundles. | Annex II §2.2 | Consumer | [Clinical Data Consumer](resource-access.html) | QEDm Clinical Data Consumer |
| `api-provider-data` | The EHR system Interoperability Software Component SHALL be capable of providing priority category data that conforms to the EEHRxF data format, as defined by each priority category. | Annex II §2.1, §2.4 | Provider | Priority Category Content Profiles | HL7 EU Content IGs |
| `api-consumer-data` | The EHR system Interoperability Software Component SHALL be able to receive and handle data for its intended use, when that data is conforming to the EEHRxF data format (as defined by each priority category). | Annex II §2.2 | Consumer | Priority Category Content Profiles | HL7 EU Content IGs |
| `api-encryption` | The EHR system Interoperability Component SHALL be capable of transport-encrypted data exchange | Annex II §1.4, Art. 36(3)(e) | Provider + Consumer | [Transport Security](authorization.html#transport-security) | TLS 1.2+ |



### Logging Requirements

| D5.1 Req ID | D5.1 Normative Requirement | EHDS Basis | Actor | IG Section | Technical Spec |
|-------------|----------------------------|------------|-------|------------|----------------|
| `log-UserAccess` | The EHR system SHALL produce logs corresponding to access of its data by health professionals or other users of the EHR system. | Annex II §3.2 | EHR System | **Out of Scope** - Logging component separate from interoperability | Logging component IG |
| `log-APIAccess` | The EHR system SHALL produce logs for all access events to its data by healthcare professionals or other authorised users. | Annex II §3.2 | EHR System | **Out of Scope** - Logging component separate from interoperability | Logging component IG |
| `log-UserID` | EHR systems SHALL implement appropriate identifying attributes that enable the unambiguous electronic identification and authentication of each healthcare professional or other authorised natural person accessing data within the EHR system. | Annex II §3.1 | EHR System | **Out of Scope** - User authentication is Member State infrastructure | Member State identity services (eIDAS) |
| `log-Review` | The EHR system SHALL include tools or mechanisms to review and analyse the log data OR SHALL support the connection and use of external software for the same purposes. | Annex II §3.3 | EHR System | **Out of Scope** - Logging component separate from interoperability | Logging component IG |
| `log-Retention` | The EHR system SHALL support different log retention periods and user access rights that take into account the origins and categories of electronic health data. | Annex II §3.4 | EHR System | **Out of Scope** - Logging component separate from interoperability | Logging component IG |
| `log-Interoperability` | The EHR system SHOULD support a standardized format and exchange mechanism for audit log data to ensure interoperability between EHR systems and external log management or access services. | Annex II §3.2-3.3, Art. 9 | EHR System | **Out of Scope** - Logging component separate from interoperability | Logging component IG (IHE ATNA, FHIR AuditEvent) |


### GENERAL REQUIREMENTS - Out of Implementation Guide Scope

| D5.1 Req ID | D5.1 Normative Requirement | EHDS Basis | Actor | IG Section | Technical Spec |
|-------------|----------------------------|------------|-------|------------|----------------|
| `gen-Installation` | The EHR System SHALL ensure the harmonised software components are designed and developed that they can be supplied and installed, taking into account the instructions and information provided by the manufacturer, without significantly adversely affecting the EHR System's characteristics and performance during its intended use. | Annex II §1.2 | EHR System | **Out of Scope** - Software quality/installation, not API specification | Software installation procedures |
| `gen-Documentation` | EHR Systems Manufacturers SHALL ensure operators which will install the harmonized components have access to detailed documentation of the installation procedure and configuration. | Annex II §1.2 | Manufacturer | **Out of Scope** - Documentation requirement, not API specification | Manufacturer documentation |
| `gen-performanceSafety` | The EHR System SHALL ensure that the harmonized components, during normal conditions of use, do not prevent the EHR system being used for its intended purpose, do not meaningfully impact the EHR system's performance, and do not put at risk patient safety. | Annex II §1.1 | EHR System | **Out of Scope** - Software quality/performance, not API specification | Software quality assurance, ISO/IEC 25010 |
| `gen-noUndueBurden` | The EHR system acting as a provider SHALL not include features that prohibit, restrict or place an undue burden on authorised access, personal electronic health data sharing or use of personal electronic health data for permitted purposes | Annex II §2.5 | EHR System | Implemented via open API approach | General principle (no specific technical requirement) |
| `gen-SystemReplacement` | The EHR system acting as a provider SHALL allow authorised export of the personal electronic health data it stores in the EEHRxF, for the purpose of system replacement, within a reasonable timeframe and without any technical or procedural impediments that would constitute undue burden. | Annex II §2.6 | Provider | Covered by batch access to document/resource APIs | Operational procedure using standard APIs |